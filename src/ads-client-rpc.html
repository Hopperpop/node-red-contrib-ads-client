<script type="text/javascript">
  RED.nodes.registerType('ads-client-rpc', {
    paletteLabel: 'ADS - RPC',
    category: 'TwinCAT ADS',
    icon: 'font-awesome/fa-angle-double-right',
    align: 'right',
    color: '#3FADB5',
    inputs: 1,
    inputLabels: function () {
      return this.methodName === '' ? "Value (topic as variable name)" : "Value"
    },
    outputs: 1,
    outputLabels: "Return data",
    defaults: { 
      name: { value: '' },
      connection: { value: null, type: "ads-client-connection" },
      methodName: { value: "", required: true },
    },
    label: function () {
      if (this.connection === null)
        return `${(this.name || `ADS - Method call`)} (*Not configured*)`;

      if (this.name) {
        return this.name
      }

      return `ADS - Method call (${(this.methodName === '' ? `msg.topic` : `${this.methodName}`)})`;
    },
    oneditprepare: function () {
      //Stuff that is done when properties panel is opened
    }
  })
</script>



<!-- Properties -->
<script type="text/html" data-template-name="ads-client-rpc">
  <div class="form-row">
      <label for="node-input-name"><i class="fa fa-tag"></i> Name</label>
      <input type="text" id="node-input-name" placeholder="Name (optional)">
  </div>

  <div class="form-row">
      <label for="node-input-connection"><i class="fa fa-bookmark"></i> ADS connection</label>
      <input type="text" id="node-input-connection" placeholder="ADS Connection">
  </div>

  <div class="form-row">
      <label for="node-input-methodName"><i class="fa fa-tag"></i> Method name</label>
      <input type="text" id="node-input-methodName" placeholder="Method name">
  </div>
  <div class="form-tips"><b>Tip:</b> Leave method name empty to use <code>msg.topic</code> input instead.</div>
  
  <div class="form-row">
    <!-- Some margin after tip -->
  </div>

</script>
